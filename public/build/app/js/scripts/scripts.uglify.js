function config($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"app/components/home/homeView.html",controller:"homeController",controllerAs:"hm"}).when("/movie/:id",{templateUrl:"app/components/movieDetail/movieDetailView.html",controller:"movieDetailController",controllerAs:"vm"}).when("/favorites",{templateUrl:"app/components/favorite/favoriteMoviesView.html",controller:"favoritesController",controllerAs:"fm"}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!1)}function favoritesController($location){function deleteFavorite(imdbID){for(var i=0;i<fm.favroteMovies.length;i++)fm.favroteMovies[i].imdbID===imdbID&&(fm.favroteMovies.splice(i,1),localStorage.setItem("favItems",JSON.stringify(fm.favroteMovies)),$location.path("favorites"))}var fm=this;fm.deleteFavorite=deleteFavorite,fm.favroteMovies=JSON.parse(localStorage.getItem("favItems"))}function homeController($scope){console.log("homeController")}function movieDetailController($routeParams,getMovieDetailService,$location){function getMovieDetail(){getMovieDetailService.get({i:$routeParams.id},function(data){vm.showMovieDetail=!1,vm.movieDetail=data,checkFavoriteMovie()},function(error){console.log("there is error in api")})}function checkFavoriteMovie(){if(JSON.parse(null!=localStorage.getItem("favItems"))){var found=JSON.parse(localStorage.getItem("favItems")).some(function(el){return el.imdbID===vm.movieDetail.imdbID});found&&(vm.favShow=!0)}}function setFavorite(detail){return vm.favItems=[],vm.favShow?void $location.path("/favorites"):(vm.favShow=!0,vm.favItems=JSON.parse(localStorage.getItem("favItems")),null==vm.favItems&&(vm.favItems=[]),vm.favItems.push(detail),void localStorage.setItem("favItems",JSON.stringify(vm.favItems)))}var vm=this;vm.movieDetail={},vm.showMovieDetail=!0,vm.setFavorite=setFavorite,vm.isFavorite=!0,vm.favItems=[],vm.favShow=!1,getMovieDetail()}function getMovieDetailService($resource){var factoryData=$resource(APP.endpoints.movieDetail,{},{query:{method:"GET",isArray:!1}});return factoryData}function searchMovieController(getMovieService){function movieSearch(){var limit_start=movie.listOfMovie.length;movie.movieNoFound=!1,1==movie.checkInKeyword&&movie.keywordChange!=movie.keyword&&(console.log("okok"),movie.page=1,movie.totalSizeImg=0,movie.allResImg=1,movie.listOfMovie=[]),""!==movie.keyword&&void 0!=movie.keyword&&(movie.totalSizeImg>limit_start||0==movie.totalSizeImg)&&1==movie.allResImg&&(movie.showLoader=!0,movie.allResImg=0,getMovieService.get({s:movie.keyword,page:movie.page},function(data){movie.allResImg=1,movie.checkInKeyword=1,movie.totalSizeImg=data.totalResults,movie.showLoader=!1,movie.keywordChange=movie.keyword,movie.listOfMovie=movie.listOfMovie.concat(data.Search),movie.page++,"Movie not found!"==data.Error&&(movie.movieNoFound=!0)},function(error){movie.listOfMovie=[]}))}function loadMore(){""!==movie.keyword&&void 0!==movie.keyword&&movieSearch()}var movie=this;movie.listOfMovie=[],movie.searchMovies=movieSearch,movie.showLoader=!1,movie.movieNoFound=!1,movie.page=1,movie.totalSizeImg=0,movie.allResImg=1,movie.checkInKeyword=0,movie.loadMore=loadMore,movie.keywordChange}function searchMovieModule(){var directive={templateUrl:"app/shared/search/searchView.html",restrict:"E",controller:searchMovieController,controllerAs:"movie"};return directive}function getMovieService($resource){var factoryData=$resource(APP.endpoints.fetchMovie,{},{query:{method:"GET",isArray:!1}});return factoryData}angular.module("app",["ngRoute","ngResource","infinite-scroll"]),angular.module("app").config(config),angular.module("app").controller("favoritesController",favoritesController),angular.module("app").controller("homeController",homeController),angular.module("app").controller("movieDetailController",movieDetailController),angular.module("app").factory("getMovieDetailService",getMovieDetailService),angular.module("app").controller("searchMovieController",searchMovieController),angular.module("app").directive("searchMovie",searchMovieModule),angular.module("app").factory("getMovieService",getMovieService);